## 文本数据处理命令

### cut命令

`cut`命令，以行为单位切割行数据，显示切割的行数据

参数：`-f`选择显示的列，`-s`不显示没有分隔符的行，`-d`自定义分隔符

```shell
#文件名：regularizationTest #
hello msb
hellowjw
hello angelababy
hello dilireba
iiii250 wyf
hello zhangxinyi
11 hel mhellosbjy lo
###############

# 展示第1列
cut -d ' ' -f1 regularizationTest

# 展示第1-2列
cut -d ' ' -f1,2 regularizationTest

# 展示第1-3列
cut -d ' ' -f1-3 regularizationTest

# 不显示没有分隔符的行
cut -d ' ' -f1-3  -s regularizationTest
```

### sort命令

sort命令，用于对行数据进行排序，参数有：

`-n`：按数值排序，若没有-n参数则按字典序来排序

`-r`：倒序

`-t`：自定义分隔符

`-k`：选择排序列

`-u`：合并相同行

`-f`：忽略大小写

```shell
#文本名称 sortTest#
angelababy 9
dilireba 10
zhangxinyi 8
zhangxinyi 8
Angelababy 9
kasha 12
akali 11.5
#################

# 按名字排序（默认是字典序）
sort -t ' ' -k1 sortTest

# 按名字排序，且合并相同的行
sort -t ' ' -k1 -u sortTest
# 按名字排序，且合并相同的行，忽略大小写
sort -t ' ' -k1 -u -f sortTest

# 按颜值排序（数值序）
sort -t ' ' -k2 -n -u -f sortTest
# 倒序
sort -t ' ' -k2 -n -r -u -f sortTest
```

### wc命令

`wc`命令，统计文本的行数，词数，字节数

```shell
wc sortTest
# 结果为：
# 行数 词数 字节数  文件名
# 7    14    84  sortTest

# 仅显示单词数
wc -w sortTest

# 仅显示行数
wc -l sortTest

# 仅显示字节数
wc -c sortTest

# 与管道配合使用
cat sortTest | wc -w
cat passwd | wc -l
```



## sed行编辑器

`sed`命令，行编辑器，以行为单位进行数据处理，可以将数据行进行替换、删除、新增、选取等工作

使用方式：`sed [options] 'command' fileName1 fileName2...`

#### options有：

`-n`：静默模式，不在默认显示模式空间（模式空间即内存，sed命令会一行一行地把数据读入内存中）中的内容。

`-i`：直接修改文件，不加此选项，则sed命令不会改变原文件的内容

`-e`：SCRIPT -e SCRIPT 可以同时执行多个脚本

`-f`：/PATH/TO/SED_SCRIPT

`-r`：表示使用扩展正则表达式

#### command有：

d：删除符合条件的行

p：显示符合条件的行，一般于`-n`配合使用

a\string：a代表after，在指定的行后面追加新行，内容为string

\n：可以用于换行

i\string：i代表in front，在指定的行前面添加新行，内容为string

c：取代，c的后面可以接字符串

s/pattern/string/修饰符：查找并替换，默认只替换每行中第一次被模式匹配到的字符串，

​    使用修饰符：

​    `g`：行内全部匹配到的模式都替换

​    `i`：忽略字符大小写

```shell
#文件名：sedTest#
hello1
hello2
hello3
################

# 显示第2行
sed -n '2p' sedTest

# 删除第2行
sed '2d' sedTest
# 删除第2行，并保存到原文件
sed -i '2d' sedTest

# 追加内容，在每一行后加上world
sed 'world' sedTest

# 在匹配到的行后面，追加world
sed -e '/hello2/a\world' sedTest
# 在匹配到的行前面，追加world
sed -e '/hello2/i\world' sedTest

################################

## 查找并替换inittab文件中的内容
# 修改/root/wjw/graduate/course/inittab的最后一行
sed -e 's/id:[0-9]:initdefault:/id:6:initdefault/' inittab
# 或
sed 's/\(id:\)[0-9]\(:initdefault:\)/\16\2/' inittab

# 可以将要修改的值写成变量
version=6
sed -e 's/id:[0-9]:initdefault:/id:$version:initdefault/' inittab
# 或
sed 's/\(id:\)[0-9]\(:initdefault:\)/\1$version\2/' inittab


## 查找并替换配置文件ifcfg-eth0中的内容
# 将IPADDR地址的末尾替换为99
# 步骤如下：
# 先写好正则表达式 s/(IPADDR=([0-9]?[0-9][0-9]?\.){3}).*/\199/
# 再将特殊字符转义：
# \(IPADDR=\([0-9]\?[0-9][0-9]\?\.\)\{3\}\).*/\199/

sed 's/\(IPADDR=\([0-9]\?[0-9][0-9]\?\.\)\{3\}\).*/\199/' ifcfg-eth0
```

























